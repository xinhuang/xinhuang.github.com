<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>Why IOString !&#x3D; String In Haskell</title>
    <style>
    body {
        margin: 1em auto;
        max-width: 40em;
        padding: 0 .62em;
        font: 1.2em/1.62em sans-serif;
        background-color: #f0efd1;
    }

    h1,
    h2,
    h3 {
        line-height: 1.2em;
    }

    @media print {
        body {
            max-width: none;
        }
    }

    a {
        text-decoration: none;
    }

    li {
        list-style: none;
    }

    article {
        margin: auto;
        font-size: 14px;
        padding: 3px 1em
    }

    .metadata {
        color: rgba(0, 0, 0, 0.54);
    }
    </style>
</head>

<body>
    <article id="top" class="anchor">
        <div layout="row">
            <div flex="30" flex-xs="0" flex-sm="15"></div>
            <div flex="40" flex-xs="100" flex-sm="70">
                <h1>Why IOString !&#x3D; String In Haskell</h1>
                <div class="metadata">2013-08-08</div>
                <!-- htmlmin:ignore -->
                <p>In GHCi, I want to test my <code>headRev</code> function, while loading Mercurial log from a file and pass the content to headRev function:</p>
<pre><code>log = readFile &quot;hg.log&quot;
headRev log
</code></pre><p>I get a error message complaining <code>IO String is not [Char]</code>:</p>
<blockquote>
<p>Couldn&#39;t match expected type <code>[Char]</code> with actual type <code>IO String</code> In
the first argument of <code>headRev</code>, namely <code>log</code> In the expression:
headRev log In an equation for <code>it</code>: <code>it = headRev log</code></p>
</blockquote>
<p>Why <code>IO String</code> is not compatible with <code>String</code>? Why is it designed like this?
After googled the error, here is a insightful reason to this question.</p>
<blockquote>
<p>There is a very good reason why there is no such function.</p>
<p>Haskell has the notion of functional purity. This means that a
function will always return the same result when called with the same
parameters. The only place where IO is allowed is inside the IO Monad.</p>
</blockquote>
<p><a href="http://stackoverflow.com/a/1676052/2190129">The Answer @StackOverflow</a></p>
<p>And BTW how to &quot;walk&quot; around it while you want to test in GHCi? I&#39;m doing this way:</p>
<p>Define <code>interactWith</code> function in source code, compile, and load via <code>:l *hgrev</code></p>
<pre><code>interactWith function [inputFile] = do
    input &lt;- readFile inputFile
    putStrLn (function input)
</code></pre><p>Then in GHCi:</p>
<pre><code>let f log = headRev (lines log)
interactWith f &quot;hg.log&quot;
</code></pre>
                <!-- htmlmin:ignore -->
            </div>
        </div>
    </article>
</body>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42274645-1', 'auto');
  ga('send', 'pageview');
</script>

</html>
