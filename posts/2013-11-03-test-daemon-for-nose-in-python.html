<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1"><title>Test Daemon For Nose In Python</title></head><body><article id=top class=markdown-body><div><div><h1>Test Daemon For Nose In Python</h1><div class=metadata>2013-11-03</div><hr>
                <p>Last week we had a great night with Tim Ottinger, playing with Python to analyze commit history.</p>
<p>One thing impressed me is Tim&#39;s Python develop environment. His tests are running automatically after a change. I didn&#39;t caught up how he made it work, and cannot find a apropiate key word to google. So here is my own. :P</p>
<p>The basic idea is quite simple: Use nose API to re-run tests every time a source change is detected.</p>
<pre class="hljs"><code class="python"><span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>
    <span class="hljs-keyword">while</span> sourceChanged(dirs):
        time.sleep(<span class="hljs-number">1</span>)
    nose.run()</code></pre><p>Only thing needs special attention is to isolate test modules by provide option <code>--with-isolation</code>, so nose will reload them before each <code>nose.run</code>.</p>
<script src="https://gist.github.com/xinhuang/7280997.js"></script>

<p>There could be more enhancement:</p>
<ol>
<li><p>Not only monitor *.py files, but all files. Configuration files can also have an impact on test result.</p>
</li>
<li><p>Ignore version control files, because these folders are always filled by tones of files.</p>
</li>
</ol>
<hr>
<p>Update:</p>
<p>There is a python lib <a href="https://github.com/gorakhargosh/watchdog">watchdog</a> that can be used to monitor file changes. Try it!</p>

                </div></div><hr><a href=/ class=left>Home</a> <a href=# class=right>Top</a></article><style>body{margin:1em auto;max-width:40em;padding:0 .62em;font:1.2em/1.62em sans-serif;background-color:#f0efd1}h1,h2,h3{line-height:1.2em}@media print{body{max-width:none}}a{text-decoration:none}article{margin:auto;font-size:14px;padding:3px 1em}.metadata{color:rgba(0,0,0,.54)}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}.left{float:left}.right{float:right}</style><link rel=stylesheet href=/github-markdown.css><link rel=stylesheet href=/zenburn.css><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-42274645-1","auto"),ga("send","pageview")</script></body></html>