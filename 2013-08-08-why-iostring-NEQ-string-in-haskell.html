<!doctype html><html ng-app=xinhuangGithubCom ng-strict-di><head><meta charset=utf-8><title>Why IOString != String In Haskell</title><meta name=description content=""><meta name=viewport content="width=device-width"><!-- Place favicon.ico and apple-touch-icon.png in the root directory --><link rel=stylesheet href=styles/vendor-bfbf54ee58.css><link rel=stylesheet href=styles/app-d5a71a58a1.css><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-42274645-1', 'auto');
      ga('send', 'pageview');</script></head><body><!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><article id=top class=anchor><div layout=row><div flex=30 flex-xs=0 flex-sm=15></div><div flex=40 flex-xs=100 flex-sm=70><h1 class=md-h1>Why IOString != String In Haskell</h1><div class=entry-meta>2013-08-08</div><textarea>
              <marked>
                  
In GHCi, I want to test my `headRev` function, while loading Mercurial log from a file and pass the content to headRev function:

    log = readFile &quot;hg.log&quot;
    headRev log

I get a error message complaining `IO String is not [Char]`:

&gt; Couldn&#039;t match expected type `[Char]` with actual type `IO String` In
&gt; the first argument of `headRev`, namely `log` In the expression:
&gt; headRev log In an equation for `it`: `it = headRev log`

Why `IO String` is not compatible with `String`? Why is it designed like this?
After googled the error, here is a insightful reason to this question.

&gt; There is a very good reason why there is no such function.
&gt;
&gt; Haskell has the notion of functional purity. This means that a
&gt; function will always return the same result when called with the same
&gt; parameters. The only place where IO is allowed is inside the IO Monad.

[The Answer @StackOverflow][1]

And BTW how to &quot;walk&quot; around it while you want to test in GHCi? I&#039;m doing this way:

Define `interactWith` function in source code, compile, and load via `:l *hgrev`

    interactWith function [inputFile] = do
        input &lt;- readFile inputFile
        putStrLn (function input)

Then in GHCi:

    let f log = headRev (lines log)
    interactWith f &quot;hg.log&quot;

[1]: http://stackoverflow.com/a/1676052/2190129

              </marked>
          </textarea></div></div><md-divider></md-divider><div class=footer layout=row><div flex=30 flex-xs=0 flex-sm=15></div><div flex=40 flex-xs=100 flex-sm=70 layout=row><a href=/ >Home</a><div flex></div><a href="" ng-click=blog.scrollToTop()>Top</a></div></div></article><script src=scripts/vendor-b1387507a1.js></script><script src=scripts/app-1e997bf866.js></script></body></html>