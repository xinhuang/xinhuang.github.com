<!doctype html><html ng-app=xinhuangGithubCom ng-strict-di><head><meta charset=utf-8><title>Test Daemon For Nose In Python</title><meta name=description content=""><meta name=viewport content="width=device-width"><!-- Place favicon.ico and apple-touch-icon.png in the root directory --><link rel=stylesheet href=styles/vendor-742ba0962d.css><link rel=stylesheet href=styles/app-d5a71a58a1.css><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-42274645-1', 'auto');
      ga('send', 'pageview');</script></head><body><!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><article id=top class=anchor><div layout=row><div flex=30 flex-xs=0 flex-sm=15></div><div flex=40 flex-xs=100 flex-sm=70><h1 class=md-h1>Test Daemon For Nose In Python</h1><div class=entry-meta>2013-11-03</div>
            <marked>
                
Last week we had a great night with Tim Ottinger, playing with Python to analyze commit history.

One thing impressed me is Tim&#039;s Python develop environment. His tests are running automatically after a change. I didn&#039;t caught up how he made it work, and cannot find a apropiate key word to google. So here is my own. :P

The basic idea is quite simple: Use nose API to re-run tests every time a source change is detected.

	while True
	    while sourceChanged(dirs):
	        time.sleep(1)
	    nose.run()

Only thing needs special attention is to isolate test modules by provide option `--with-isolation`, so nose will reload them before each `nose.run`.

{% gist 7280997 %}

There could be more enhancement:

1. Not only monitor \*.py files, but all files. Configuration files can also have an impact on test result.

2. Ignore version control files, because these folders are always filled by tones of files.

---

Update:

There is a python lib [watchdog](https://github.com/gorakhargosh/watchdog) that can be used to monitor file changes. Try it!

            </marked>
            </div></div><md-divider></md-divider><div class=footer layout=row><div flex=30 flex-xs=0 flex-sm=15></div><div flex=40 flex-xs=100 flex-sm=70 layout=row><a href=/ >Home</a><div flex></div><a href=#>Top</a></div></div></article><script src=scripts/vendor-992057851c.js></script><script src=scripts/app-9a0b2c27d9.js></script></body></html>